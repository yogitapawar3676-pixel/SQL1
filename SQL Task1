CREATE DATABASE ECommerceDB;

USE ECommerceDB;

CREATE TABLE Customer(
    customer_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    phone VARCHAR(15),
    addrress TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP    
);
DROP TABLE Customer;
CREATE TABLE Categories(
   category_id INT PRIMARY KEY,
   category_name 	VARCHAR(50) NOT NULL
);

CREATE TABLE Product(
   product_id INT PRIMARY KEY,
   nmae VARCHAR(100) NOT NULL,
   description TEXT,
   price DECIMAL(10, 2)NOT NULL CHECK (price>=0),
   stock INT DEFAULT 0 CHECK (stock>=0),
   category_id INT,
   FOREIGN KEY (category_id) REFERENCES Categories(category_id)
   
);

CREATE TABLE Orders(
    order_id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT NOT NULL,
    order_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    total_amount DECIMAL(10, 2),
    status ENUM('Pending','Shipped','Deliver','Cancelled') DEFAULT 'Pending',
    FOREIGN KEY (customer_id) REFERENCES Customer(customer_id)
);

CREATE TABLE OrderItems(
   order_item_id INT AUTO_INCREMENT PRIMARY KEY,
   order_id INT NOT NULL,
   product_id INT NOT NULL,
   quantity INT NOT NULL CHECK (quantity>=0),
   price DECIMAL(10,2) NOT NULL CHECK (price>=0),
   FOREIGN KEY (order_id) REFERENCES Orders(order_id),
   FOREIGN KEY (product_id) REFERENCES Product(product_id)
);

CREATE TABLE Payment(
 payment_id INT AUTO_INCREMENT PRIMARY KEY,
 order_id INT,
 payment_date DATETIME DEFAULT CURRENT_TIMESTAMP,
 amount DECIMAL(10,2),
 method ENUM('Credit card', 'Paypal','UPI','Cash on delivery'),
 FOREIGN KEY (order_id) REFERENCES Orders(order_id)
);
